### Next upgrade (v1.7) — **Edge selection + hover + issue→focus + persisted layouts**

This is the most valuable upgrade right after 1.6 code because it makes the ERD feel “real” (relationships become first-class, not just lines).

#### 1) Interactive edges (hover + click select)

* Make SVG edges clickable (turn pointer events on)
* On hover: show FK name + child→parent cols tooltip
* On click: set `selected: { type:'relationship', key }` and open inspector

**Deliverable**

* Patch `ErdCanvas.tsx` to render edges in an interactive SVG layer (no `pointerEvents:none`)
* Add hover state + tooltip

---

#### 2) Issue → Focus behavior (tight loop with checklist)

* On ERD page: small “Issues” drawer
* Clicking an issue:

  * if target is table → center view + select table
  * if target is relationship → center view near child + select relationship

**Deliverable**

* Add `IssuesDrawer.tsx`
* Add `focusOn({type,key})` wiring + viewport centering

---

#### 3) Persist layout per instance (so dragging isn’t lost)

* Save table positions to **App DB** keyed by `instanceId + tableKey`
* Load on page open; fall back to auto layout if missing

**Backend**

* Add tables:

  * `erd_layouts(instance_id uuid, table_key text, x int, y int, w int, h int, updated_at)`
* Endpoints:

  * `GET /api/v1/checklist-instances/:id/erd-layout`
  * `PUT /api/v1/checklist-instances/:id/erd-layout` (batch upsert)

**Frontend**

* On drag end: debounce save (e.g., 600ms)
* On load: hydrate store layout

---

#### 4) Schema filter + search highlight (polish)

* Filter visible tables by schema lanes
* Search: highlight matches + dim non-matches

---

### If you want the code for v1.7 right now

Say **“1.7 code”** and I’ll output:

* the DB migration for `erd_layouts`
* Fastify routes for GET/PUT layout
* `IssuesDrawer.tsx`
* patched `ErdCanvas.tsx` with edge hover/click + tooltip
* debounced layout persistence hook
