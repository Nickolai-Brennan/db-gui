## Step 1.1.05 — Checklist Builder + Instances Wiring (Templates → Instances → Issues Queue) (exact)

Goal: implement the runtime surfaces:

- Templates list
- Versioning (draft vs published)
- Builder tree editor
- Instance view (computed rollups)
- Issues work queue (Dashboard)

Reference: Builder UI Spec v1. fileciteturn0file2  
Reference: Dashboard Layout v1. fileciteturn0file4

---

# 1.1.05a) Templates API (minimum)

Endpoints (or GraphQL equivalents):

- `GET /templates?workspaceId=...`
- `POST /templates`
- `POST /templates/:id/versions` (creates draft)
- `POST /versions/:id/publish` (immutable after publish)
- `GET /versions/:id/nodes` (tree)
- `POST /versions/:id/nodes` (create node)
- `PATCH /nodes/:id`
- `POST /nodes/reorder` (batch move + sort)

---

# 1.1.05b) Instance runtime API (minimum)

- `POST /instances` (create instance for connection + scope)
- `GET /instances/:id/summary`
- `GET /instances/:id/tree`
- `GET /instances/:id/issues` (flattened work queue)
- `POST /instances/:id/run` (run all)
- `POST /instances/:id/run-selected` (nodeIds)
- `PATCH /results/:id` (manual checks + evidence)

---

# 1.1.05c) Checklist engine rollups (authoritative)

Rules:
- leaf items: PASS if 0 rows returned; FAIL/BLOCK if rows returned
- group status bubbles up:
  - blocked > fail > warning > pass > incomplete

Persist instance counts:
- `{blocking, warning, fail, pass}`

---

# 1.1.05d) Dashboard binding

Dashboard needs only:

- overall status + counts
- section scorecards
- issues work queue

When user clicks an issue:
- deep link to ERD focus mode
- use `Annotation API` for the overlay set

---

# Done criteria for 1.1.05

✅ Templates can be created and published  
✅ Instances can be created and run  
✅ Dashboard renders from instance state  
✅ Issues queue deep-links into ERD spotlight mode  
✅ Builder matches 3-pane spec (Tree / Editor / Preview)

---
