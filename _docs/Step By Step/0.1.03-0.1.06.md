## Continuing 0.1 — Exact Root Files + Commands (Steps 0.1.03–0.1.06)

Below is the **copy/paste starter kit** to get the monorepo + web + api running, with the smallest number of moving parts.

---

# Step 0.1.03 — Pin Node + enable pnpm

## 0.1.03a) Create `.nvmrc`

```txt
20
```

## 0.1.03b) (Optional but recommended) Create `packageManager` pin

In root `package.json` we’ll set:

* `"packageManager": "pnpm@9.15.0"` (example)

If you’re using corepack:

```bash
corepack enable
corepack prepare pnpm@9.15.0 --activate
```

---

# Step 0.1.04 — Workspace config + folders

## 0.1.04a) Root `package.json` (exact)

Create `/package.json`:

```json
{
  "name": "db-gui",
  "private": true,
  "packageManager": "pnpm@9.15.0",
  "workspaces": [
    "apps/*",
    "packages/*"
  ],
  "scripts": {
    "dev": "pnpm -r dev",
    "build": "pnpm -r build",
    "lint": "pnpm -r lint",
    "typecheck": "pnpm -r typecheck",
    "format": "pnpm -r format"
  }
}
```

## 0.1.04b) `pnpm-workspace.yaml` (exact)

Create `/pnpm-workspace.yaml`:

```yaml
packages:
  - "apps/*"
  - "packages/*"
```

## 0.1.04c) Create folders

Run:

```bash
mkdir -p apps/web apps/api packages/shared infra scripts .github/workflows
```

---

# Step 0.1.05 — Scaffold `apps/web` (Vite + React + TS)

From repo root:

```bash
cd apps
pnpm create vite web --template react-ts
cd ..
pnpm install
```

### Verify web runs

```bash
pnpm --filter web dev
```

**Expected:** Vite dev server starts.

---

# Step 0.1.06 — Scaffold `apps/api` (Fastify + TS)

Inside `apps/api` create these files:

## 0.1.06a) `apps/api/package.json`

```json
{
  "name": "api",
  "private": true,
  "type": "module",
  "scripts": {
    "dev": "tsx watch src/index.ts",
    "build": "tsc -p tsconfig.json",
    "typecheck": "tsc -p tsconfig.json --noEmit",
    "lint": "echo \"(lint later)\"",
    "format": "prettier -w ."
  },
  "dependencies": {
    "fastify": "^4.28.1"
  },
  "devDependencies": {
    "tsx": "^4.19.2",
    "typescript": "^5.6.3",
    "prettier": "^3.3.3"
  }
}
```

## 0.1.06b) `apps/api/tsconfig.json`

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "moduleResolution": "Bundler",
    "outDir": "dist",
    "rootDir": "src",
    "strict": true,
    "skipLibCheck": true
  },
  "include": ["src"]
}
```

## 0.1.06c) `apps/api/src/index.ts`

```ts
import Fastify from "fastify";

const app = Fastify({ logger: true });

app.get("/health", async () => {
  return { ok: true };
});

const port = Number(process.env.PORT ?? 3001);
const host = process.env.HOST ?? "0.0.0.0";

await app.listen({ port, host });
```

### Install deps

From repo root:

```bash
pnpm install
```

### Verify API runs

```bash
pnpm --filter api dev
```

Open:

* `http://localhost:3001/health` → `{ "ok": true }`

---

# Step 0.1.06d — Make root `dev` run both

Right now root script uses `pnpm -r dev` so it will run both.

Run:

```bash
pnpm dev
```
